@model TeacherOrganizer.Models.AuthModels.ForgotPasswordModel
@{
    ViewData["Title"] = "Восстановление пароля";
}
<link rel="stylesheet" href="~/css/auth.css" />
<svg class="wave" viewBox="0 0 1440 400">
    <path fill="#FFA07A" fill-opacity="1"
          d="M0,200L80,180C160,160,320,120,480,150C640,180,800,260,960,275C1120,290,1280,240,1360,220L1440,200V400H0Z">
    </path>
</svg>
<div class="d-flex justify-content-center align-items-center vh-100">
    <div class="login-container p-4 shadow rounded">
        <h2 class="text-center">Password recovery</h2>
        <form id="forgotPasswordForm">
            <div class="mb-3">
                <label for="Email" class="form-label">Email</label>
                <input type="email" id="Email" name="Email" class="form-control" required />
            </div>
            <button type="submit" class="btn btn-primary w-100">Submit link</button>
        </form>
        <div class="text-center mt-3">
            <a href="/AuthView/Login" class="text-decoration-none">Return to login</a>
        </div>
    </div>
</div>

@section Scripts {
    <script>

        document.getElementById('forgotPasswordForm').addEventListener('submit', function (e) {
        e.preventDefault();
        const email = document.getElementById('Email').value.trim();
        fetch('/api/Auth/forgot-password', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ Email: email })
        })
        .then(r => r.json())
        .then(data => {
        alert(data.message || 'Check your email if your email is registered.');
        window.location.href = '/AuthView/Login';
        })
        .catch(() => alert('Error sending email.'));
        });
    </script>
}